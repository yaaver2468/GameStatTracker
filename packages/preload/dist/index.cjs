"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const L=require("electron"),h=require("sqlite3"),O=process.versions,U=require("node-fetch");function A(){L.ipcRenderer.send("closeProgram")}function w(){L.ipcRenderer.send("minimizeProgram")}function S(n){L.shell.openExternal(n)}async function f(){const t=await U("https://raw.githubusercontent.com/GuardianSeeker/SniperHunter/master/version");return parseFloat(await t.text())>3.4}async function $(){return await L.ipcRenderer.invoke("addReplay")}class k{id;gameID;time;killerID;killedID;knocked;weapon;constructor(e={id:0,gameID:"",time:0,killerID:"",killedID:"",knocked:!1,weapon:""}){this.id=e.id,this.gameID=e.gameID.toLowerCase(),this.time=e.time,this.killerID=e.killerID.toLowerCase(),this.killedID=e.killedID.toLowerCase(),this.knocked=e.knocked,this.weapon=e.weapon}}class C{id;playerID;gameID;isBot;team;kills;placement;constructor(e={id:0,playerID:"",gameID:"",isBot:!0,team:0,kills:0,placement:999}){this.id=e.id,this.playerID=e.playerID,this.gameID=e.gameID,this.isBot=e.isBot,this.team=e.team,this.kills=e.kills,this.placement=e.placement}}class T{gameID;owner;timestamp;replayName;mode;bots;players;duration;placement;kills;assists;accuracy;damageDealt;damageTaken;distanceTravelled;constructor(e={gameID:"",owner:"",timestamp:new Date,replayName:"",mode:"",bots:0,players:0,duration:0,placement:0,kills:0,assists:0,accuracy:0,damageDealt:0,damageTaken:0,distanceTravelled:0}){this.gameID=e.gameID.toLowerCase(),this.owner=e.owner.toLowerCase(),this.timestamp=e.timestamp,this.replayName=e.replayName,this.mode=e.mode,this.bots=e.bots,this.players=e.players,this.duration=e.duration,this.placement=e.placement,this.kills=e.kills,this.assists=e.assists,this.accuracy=e.accuracy,this.damageDealt=e.damageDealt,this.damageTaken=e.damageTaken,this.distanceTravelled=e.distanceTravelled}}class d{playerID;username;isBot;platform;skin;snipes;constructor(e={playerID:"",username:"AI",isBot:!0,platform:"epic",skin:"epic",snipes:0}){this.playerID=e.playerID.toLowerCase(),this.username=e.username,this.isBot=e.isBot,this.platform=e.platform,this.skin=e.skin,this.snipes=e.snipes}}const G=[`CREATE TABLE IF NOT EXISTS 'GameEliminations' (
    'id' INTEGER PRIMARY KEY AUTOINCREMENT,
    'gameID' VARCHAR(255) NOT NULL,
    'time' INTEGER NOT NULL,
    'killerID' VARCHAR(255) NOT NULL,
    'killedID' VARCHAR(255) NOT NULL,
    'knocked' TINYINT(1) NOT NULL,
    'weapon' VARCHAR(255) NOT NULL
  )`,`CREATE TABLE IF NOT EXISTS 'GamePlayers' (
    'id' INTEGER PRIMARY KEY AUTOINCREMENT,
    'playerID' VARCHAR(255) NOT NULL,
    'gameID' VARCHAR(255) NOT NULL,
    'isBot' TINYINT(1) NOT NULL,
    'team' INTEGER NOT NULL,
    'kills' INTEGER NOT NULL DEFAULT 0,
    'placement' INTEGER NOT NULL
  )`,`CREATE TABLE IF NOT EXISTS 'GameStats' (
    'gameID' VARCHAR(255) NOT NULL UNIQUE PRIMARY KEY,
    'owner' VARCHAR(255) NOT NULL,
    'timestamp' DATETIME NOT NULL UNIQUE,
    'replayName' VARCHAR(255) NOT NULL,
    'mode' VARCHAR(255) NOT NULL,
    'bots' INTEGER NOT NULL,
    'players' INTEGER NOT NULL,
    'duration' INTEGER DEFAULT -1,
    'placement' INTEGER NOT NULL,
    'kills' INTEGER DEFAULT -1,
    'assists' INTEGER DEFAULT 0,
    'accuracy' DOUBLE PRECISION DEFAULT '-1',
    'damageDealt' INTEGER DEFAULT -1,
    'damageTaken' INTEGER DEFAULT -1,
    'distanceTravelled' DOUBLE PRECISION DEFAULT '-1'
  )`,`CREATE TABLE IF NOT EXISTS 'Players' (
    'playerID' VARCHAR(255) NOT NULL UNIQUE PRIMARY KEY,
    'username' VARCHAR(255) NOT NULL,
    'isBot' VARCHAR(255) NOT NULL,
    'platform' VARCHAR(255),
    'skin' VARCHAR(255),
    'snipes' INTEGER NOT NULL DEFAULT 1
  )`];async function m(n){return new Promise(function(e,t){I.database.all(n,function(s,a){if(s)return console.log(s),t(s);e(a)})})}async function P(n){return new Promise((e,t)=>{I.database.serialize(()=>{function s(a){a<n.length&&I.database.run(n[a],i=>{if(i)return console.log(i),t(!1);s(++a)}),e(!0)}s(0)})})}async function c(n){return new Promise(function(e,t){I.database.exec(n,function(s){if(s)return console.log(s),t(!1);e(!0)})})}async function R(n){return new Promise(function(e,t){I.database.get(n,function(s,a){if(s)return console.log(s),t(s);e(a)})})}function g(n){return`(${"'"+n.join("','")+"'"})`}class M{database;constructor(){this.database=new h.Database("database.db",e=>{e&&console.error("Database opening error: ",e)}),G.forEach(e=>{this.database.run(e)})}addReplay=async(e,t,s,a)=>{function i(r){return r.replaceAll("'","''")}let o;if(o=`INSERT INTO GameStats VALUES ('${a.gameID}', '${a.owner}', '${a.timestamp.toISOString()}', '${i(a.replayName)}', '${a.mode}', ${a.bots}, ${a.players}, ${a.duration}, ${a.placement}, ${a.kills}, ${a.assists}, ${a.accuracy}, ${a.damageDealt}, ${a.damageTaken}, ${a.distanceTravelled})`,!await c(o)||(o=`INSERT INTO GamePlayers VALUES ${e.map(r=>`(NULL, '${r.playerID}', '${r.gameID}', ${r.isBot?1:0}, ${r.team}, ${r.kills}, ${r.placement})`).join(", ")}`,!await c(o))||t.length>0&&(o=`INSERT INTO GameEliminations VALUES ${t.map(r=>`(NULL, '${r.gameID}', ${r.time}, '${r.killerID}', '${r.killedID}', ${r.knocked}, '${r.weapon}')`).join(", ")}`,!await c(o)))return!1;const p=[],N=[];for(let r=0;r<s.length;r++){const l=s[r],D=await this.getPlayer(l.playerID),y=l.platform==null?"NULL":`'${l.platform}'`;let u=l.skin==null?"NULL":`'${l.skin}'`;D!=null?(D.skin!=null&&u=="NULL"&&(u=D.skin),p.push(`UPDATE Players SET snipes = snipes + 1, platform = ${y}, username = '${i(l.username)}', skin = ${u} WHERE playerID = '${l.playerID}'`)):N.push(`('${l.playerID}', '${i(l.username)}', ${l.isBot}, ${y}, ${u}, ${l.snipes})`)}return N.length>0&&(o=`INSERT INTO Players VALUES ${N.join(", ")}`,!await c(o))?!1:await P(p)};getMatchHistory=async(e=1)=>{const s=await m(`SELECT * FROM GameStats ORDER BY timestamp DESC LIMIT ${25} OFFSET ${25*e-25}`),a=[];return s.forEach(i=>{a.push(new T(i))}),a};getGamerHistory=async(e=1,t)=>{const a=[],i=await m(`SELECT gameID FROM GamePlayers WHERE playerID = '${t}'`);return(await m(`SELECT * FROM GameStats WHERE gameID IN ${g(i.map(p=>p.gameID))} ORDER BY timestamp DESC LIMIT ${25} OFFSET ${25*e-25}`)).forEach(p=>{a.push(new T(p))}),a};getEliminations=async e=>{const t=await m(`SELECT * FROM GameEliminations WHERE gameID='${e}' ORDER BY id`),s=[];return t.forEach(a=>{s.push(new k(a))}),s};getGamers=async e=>{const t=await m(`SELECT * FROM GamePlayers WHERE gameID='${e}' ORDER BY team`),s=[];return t.forEach(a=>{s.push(new C(a))}),s};getGamerPlayers=async e=>{const t=e.map(i=>`${i.playerID}`),s=await m(`SELECT * FROM Players WHERE playerID IN ${g(t)}`),a=[];return s.forEach(i=>{a.push(new d(i))}),a};getGameStats=async e=>{const t=await R(`SELECT * FROM GameStats WHERE gameID='${e}'`);return new T(t)};getPlayer=async e=>await R(`SELECT * FROM Players WHERE playerID='${e}'`);getPlayers=async()=>await m("SELECT * FROM Players");getPlayerGames=async e=>{const t=await m(`SELECT * FROM GamePlayers WHERE playerID='${e}'`),s=[];return t.forEach(a=>{s.push(new T(a))}),s};getLastGameID=async()=>{const e=await R("SELECT * FROM GameStats ORDER BY timestamp DESC LIMIT 1");return e!=null?e.gameID:null};getSnipers=async()=>{const e=await m("SELECT * FROM Players ORDER BY snipes DESC"),t=[];return e.forEach(s=>{t.push(new d(s))}),t};getLastGame=async()=>await R("SELECT * FROM GameStats ORDER BY Timestamp DESC LIMIT 1");deleteMatch=async e=>(await c(`DELETE FROM GameStats WHERE gameID='${e}'`),await c(`UPDATE Players SET snipes = snipes - 1 WHERE playerID IN (SELECT playerID FROM GamePlayers WHERE gameID = '${e}')`),await c(`DELETE FROM GamePlayers WHERE gameID='${e}'`),await c(`DELETE FROM GameEliminations WHERE gameID='${e}'`))}const I=new M;exports.addReplay=$;exports.checkUpdate=f;exports.closeProgram=A;exports.db=I;exports.minimizeProgram=w;exports.openUrl=S;exports.versions=O;const{contextBridge:E}=require("electron");E.exposeInMainWorld("__electron_preload__addReplay",exports.addReplay);E.exposeInMainWorld("__electron_preload__checkUpdate",exports.checkUpdate);E.exposeInMainWorld("__electron_preload__closeProgram",exports.closeProgram);E.exposeInMainWorld("__electron_preload__db",exports.db);E.exposeInMainWorld("__electron_preload__minimizeProgram",exports.minimizeProgram);E.exposeInMainWorld("__electron_preload__openUrl",exports.openUrl);E.exposeInMainWorld("__electron_preload__versions",exports.versions);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguY2pzIiwic291cmNlcyI6WyIuLi9zcmMvdmVyc2lvbnMudHMiLCIuLi9zcmMvZWxlY3Ryb25GdW5jdGlvbnMudHMiLCIuLi9zcmMvbW9kZWxzL0dhbWVFbGltaW5hdGlvbi50cyIsIi4uL3NyYy9tb2RlbHMvR2FtZVBsYXllci50cyIsIi4uL3NyYy9tb2RlbHMvR2FtZVN0YXRzLnRzIiwiLi4vc3JjL21vZGVscy9QbGF5ZXIudHMiLCIuLi9zcmMvZGF0YWJhc2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHZlcnNpb25zID0gcHJvY2Vzcy52ZXJzaW9ucztcbiIsImltcG9ydCB7aXBjUmVuZGVyZXIsIHNoZWxsfSBmcm9tICdlbGVjdHJvbic7XG5jb25zdCBub2RlRmV0Y2ggPSByZXF1aXJlKCdub2RlLWZldGNoJyk7XG5cbmZ1bmN0aW9uIGNsb3NlUHJvZ3JhbSgpIHtcbiAgaXBjUmVuZGVyZXIuc2VuZCgnY2xvc2VQcm9ncmFtJyk7XG59XG5cbmZ1bmN0aW9uIG1pbmltaXplUHJvZ3JhbSgpIHtcbiAgaXBjUmVuZGVyZXIuc2VuZCgnbWluaW1pemVQcm9ncmFtJyk7XG59XG5cbmZ1bmN0aW9uIG9wZW5VcmwodXJsOnN0cmluZykge1xuICBzaGVsbC5vcGVuRXh0ZXJuYWwodXJsKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY2hlY2tVcGRhdGUoKSB7XG4gIGNvbnN0IHVwZGF0ZVVSTCA9ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vR3VhcmRpYW5TZWVrZXIvU25pcGVySHVudGVyL21hc3Rlci92ZXJzaW9uJztcbiAgY29uc3QgdmVyc2lvbiA9IDMuNDtcbiAgY29uc3QgcmVzID0gYXdhaXQgbm9kZUZldGNoKHVwZGF0ZVVSTCk7XG4gIGNvbnN0IGxhdGVzdFZlcnNpb24gPSBwYXJzZUZsb2F0KGF3YWl0IHJlcy50ZXh0KCkpO1xuICByZXR1cm4gbGF0ZXN0VmVyc2lvbiA+IHZlcnNpb247XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGFkZFJlcGxheSgpIHtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaXBjUmVuZGVyZXIuaW52b2tlKCdhZGRSZXBsYXknKTtcbiAgcmV0dXJuIHJlc3VsdCBhcyBzdHJpbmc7XG59XG5cbmV4cG9ydCB7Y2xvc2VQcm9ncmFtLCBtaW5pbWl6ZVByb2dyYW0sIG9wZW5VcmwsIGFkZFJlcGxheSwgY2hlY2tVcGRhdGV9O1xuIiwiY2xhc3MgR2FtZUVsaW1pbmF0aW9uIHtcbiAgaWQ6IG51bWJlcjtcbiAgZ2FtZUlEOiBzdHJpbmc7XG4gIHRpbWU6IG51bWJlcjtcbiAga2lsbGVySUQ6IHN0cmluZztcbiAga2lsbGVkSUQ6IHN0cmluZztcbiAga25vY2tlZDogYm9vbGVhbjtcbiAgd2VhcG9uOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoZGF0YSA9IHtcbiAgICBpZDogMCxcbiAgICBnYW1lSUQ6ICcnLFxuICAgIHRpbWU6IDAsXG4gICAga2lsbGVySUQ6ICcnLFxuICAgIGtpbGxlZElEOiAnJyxcbiAgICBrbm9ja2VkOiBmYWxzZSxcbiAgICB3ZWFwb246ICcnLFxuICB9KSB7XG4gICAgdGhpcy5pZCA9IGRhdGEuaWQ7XG4gICAgdGhpcy5nYW1lSUQgPSBkYXRhLmdhbWVJRC50b0xvd2VyQ2FzZSgpO1xuICAgIHRoaXMudGltZSA9IGRhdGEudGltZTtcbiAgICB0aGlzLmtpbGxlcklEID0gZGF0YS5raWxsZXJJRC50b0xvd2VyQ2FzZSgpO1xuICAgIHRoaXMua2lsbGVkSUQgPSBkYXRhLmtpbGxlZElELnRvTG93ZXJDYXNlKCk7XG4gICAgdGhpcy5rbm9ja2VkID0gZGF0YS5rbm9ja2VkO1xuICAgIHRoaXMud2VhcG9uID0gZGF0YS53ZWFwb247XG4gIH1cbn1cblxuZXhwb3J0IHsgR2FtZUVsaW1pbmF0aW9uIH07XG4iLCJjbGFzcyBHYW1lUGxheWVyIHtcbiAgaWQ6IG51bWJlcjtcbiAgcGxheWVySUQ6IHN0cmluZztcbiAgZ2FtZUlEOiBzdHJpbmc7XG4gIGlzQm90OiBib29sZWFuO1xuICB0ZWFtOiBudW1iZXI7XG4gIGtpbGxzOiBudW1iZXI7XG4gIHBsYWNlbWVudDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGRhdGEgPSB7XG4gICAgaWQ6IDAsXG4gICAgcGxheWVySUQ6ICcnLFxuICAgIGdhbWVJRDogJycsXG4gICAgaXNCb3Q6IHRydWUsXG4gICAgdGVhbTogMCxcbiAgICBraWxsczogMCxcbiAgICBwbGFjZW1lbnQ6IDk5OSxcbiAgfSkge1xuICAgIHRoaXMuaWQgPSBkYXRhLmlkO1xuICAgIHRoaXMucGxheWVySUQgPSBkYXRhLnBsYXllcklEO1xuICAgIHRoaXMuZ2FtZUlEID0gZGF0YS5nYW1lSUQ7XG4gICAgdGhpcy5pc0JvdCA9IGRhdGEuaXNCb3Q7XG4gICAgdGhpcy50ZWFtID0gZGF0YS50ZWFtO1xuICAgIHRoaXMua2lsbHMgPSBkYXRhLmtpbGxzO1xuICAgIHRoaXMucGxhY2VtZW50ID0gZGF0YS5wbGFjZW1lbnQ7XG4gIH1cbn1cblxuZXhwb3J0IHsgR2FtZVBsYXllciB9O1xuIiwiY2xhc3MgR2FtZVN0YXQge1xuICBnYW1lSUQ6IHN0cmluZztcbiAgb3duZXI6IHN0cmluZztcbiAgdGltZXN0YW1wOiBEYXRlO1xuICByZXBsYXlOYW1lOiBzdHJpbmc7XG4gIG1vZGU6IHN0cmluZztcbiAgYm90czogbnVtYmVyO1xuICBwbGF5ZXJzOiBudW1iZXI7XG4gIGR1cmF0aW9uOiBudW1iZXI7XG4gIHBsYWNlbWVudDogbnVtYmVyO1xuICBraWxsczogbnVtYmVyO1xuICBhc3Npc3RzOiBudW1iZXI7XG4gIGFjY3VyYWN5OiBudW1iZXI7XG4gIGRhbWFnZURlYWx0OiBudW1iZXI7XG4gIGRhbWFnZVRha2VuOiBudW1iZXI7XG4gIGRpc3RhbmNlVHJhdmVsbGVkOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoZGF0YSA9IHtcbiAgICBnYW1lSUQ6ICcnLFxuICAgIG93bmVyOiAnJyxcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgcmVwbGF5TmFtZTogJycsXG4gICAgbW9kZTogJycsXG4gICAgYm90czogMCxcbiAgICBwbGF5ZXJzOiAwLFxuICAgIGR1cmF0aW9uOiAwLFxuICAgIHBsYWNlbWVudDogMCxcbiAgICBraWxsczogMCxcbiAgICBhc3Npc3RzOiAwLFxuICAgIGFjY3VyYWN5OiAwLFxuICAgIGRhbWFnZURlYWx0OiAwLFxuICAgIGRhbWFnZVRha2VuOiAwLFxuICAgIGRpc3RhbmNlVHJhdmVsbGVkOiAwLFxuICB9KSB7XG4gICAgdGhpcy5nYW1lSUQgPSBkYXRhLmdhbWVJRC50b0xvd2VyQ2FzZSgpO1xuICAgIHRoaXMub3duZXIgPSBkYXRhLm93bmVyLnRvTG93ZXJDYXNlKCk7XG4gICAgdGhpcy50aW1lc3RhbXAgPSBkYXRhLnRpbWVzdGFtcDtcbiAgICB0aGlzLnJlcGxheU5hbWUgPSBkYXRhLnJlcGxheU5hbWU7XG4gICAgdGhpcy5tb2RlID0gZGF0YS5tb2RlO1xuICAgIHRoaXMuYm90cyA9IGRhdGEuYm90cztcbiAgICB0aGlzLnBsYXllcnMgPSBkYXRhLnBsYXllcnM7XG4gICAgdGhpcy5kdXJhdGlvbiA9IGRhdGEuZHVyYXRpb247XG4gICAgdGhpcy5wbGFjZW1lbnQgPSBkYXRhLnBsYWNlbWVudDtcbiAgICB0aGlzLmtpbGxzID0gZGF0YS5raWxscztcbiAgICB0aGlzLmFzc2lzdHMgPSBkYXRhLmFzc2lzdHM7XG4gICAgdGhpcy5hY2N1cmFjeSA9IGRhdGEuYWNjdXJhY3k7XG4gICAgdGhpcy5kYW1hZ2VEZWFsdCA9IGRhdGEuZGFtYWdlRGVhbHQ7XG4gICAgdGhpcy5kYW1hZ2VUYWtlbiA9IGRhdGEuZGFtYWdlVGFrZW47XG4gICAgdGhpcy5kaXN0YW5jZVRyYXZlbGxlZCA9IGRhdGEuZGlzdGFuY2VUcmF2ZWxsZWQ7XG4gIH1cbn1cblxuZXhwb3J0IHsgR2FtZVN0YXQgfTtcbiIsImNsYXNzIFBsYXllciB7XG4gIHBsYXllcklEOiBzdHJpbmc7XG4gIHVzZXJuYW1lOiBzdHJpbmc7XG4gIGlzQm90OiBib29sZWFuO1xuICBwbGF0Zm9ybTogc3RyaW5nO1xuICBza2luOiBzdHJpbmc7XG4gIHNuaXBlczogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGRhdGEgPSB7XG4gICAgcGxheWVySUQ6ICcnLFxuICAgIHVzZXJuYW1lOiAnQUknLFxuICAgIGlzQm90OiB0cnVlLFxuICAgIHBsYXRmb3JtOiAnZXBpYycsXG4gICAgc2tpbjogJ2VwaWMnLFxuICAgIHNuaXBlczogMCxcbiAgfSkge1xuICAgIHRoaXMucGxheWVySUQgPSBkYXRhLnBsYXllcklELnRvTG93ZXJDYXNlKCk7XG4gICAgdGhpcy51c2VybmFtZSA9IGRhdGEudXNlcm5hbWU7XG4gICAgdGhpcy5pc0JvdCA9IGRhdGEuaXNCb3Q7XG4gICAgdGhpcy5wbGF0Zm9ybSA9IGRhdGEucGxhdGZvcm07XG4gICAgdGhpcy5za2luID0gZGF0YS5za2luO1xuICAgIHRoaXMuc25pcGVzID0gZGF0YS5zbmlwZXM7XG4gIH1cbn1cblxuZXhwb3J0IHsgUGxheWVyIH07XG4iLCJpbXBvcnQge0RhdGFiYXNlIGFzIHNxbGl0ZX0gZnJvbSAnc3FsaXRlMyc7XG5pbXBvcnQge0dhbWVFbGltaW5hdGlvbn0gZnJvbSAnLi9tb2RlbHMvR2FtZUVsaW1pbmF0aW9uJztcbmltcG9ydCB7R2FtZVBsYXllcn0gZnJvbSAnLi9tb2RlbHMvR2FtZVBsYXllcic7XG5pbXBvcnQge0dhbWVTdGF0fSBmcm9tICcuL21vZGVscy9HYW1lU3RhdHMnO1xuaW1wb3J0IHtQbGF5ZXJ9IGZyb20gJy4vbW9kZWxzL1BsYXllcic7XG5cbmNvbnN0IGluaXRTdGF0ZW1lbnRzID0gW1xuICBgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgJ0dhbWVFbGltaW5hdGlvbnMnIChcbiAgICAnaWQnIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgICAnZ2FtZUlEJyBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXG4gICAgJ3RpbWUnIElOVEVHRVIgTk9UIE5VTEwsXG4gICAgJ2tpbGxlcklEJyBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXG4gICAgJ2tpbGxlZElEJyBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXG4gICAgJ2tub2NrZWQnIFRJTllJTlQoMSkgTk9UIE5VTEwsXG4gICAgJ3dlYXBvbicgVkFSQ0hBUigyNTUpIE5PVCBOVUxMXG4gIClgLFxuICBgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgJ0dhbWVQbGF5ZXJzJyAoXG4gICAgJ2lkJyBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXG4gICAgJ3BsYXllcklEJyBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXG4gICAgJ2dhbWVJRCcgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgICdpc0JvdCcgVElOWUlOVCgxKSBOT1QgTlVMTCxcbiAgICAndGVhbScgSU5URUdFUiBOT1QgTlVMTCxcbiAgICAna2lsbHMnIElOVEVHRVIgTk9UIE5VTEwgREVGQVVMVCAwLFxuICAgICdwbGFjZW1lbnQnIElOVEVHRVIgTk9UIE5VTExcbiAgKWAsXG4gIGBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyAnR2FtZVN0YXRzJyAoXG4gICAgJ2dhbWVJRCcgVkFSQ0hBUigyNTUpIE5PVCBOVUxMIFVOSVFVRSBQUklNQVJZIEtFWSxcbiAgICAnb3duZXInIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiAgICAndGltZXN0YW1wJyBEQVRFVElNRSBOT1QgTlVMTCBVTklRVUUsXG4gICAgJ3JlcGxheU5hbWUnIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiAgICAnbW9kZScgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgICdib3RzJyBJTlRFR0VSIE5PVCBOVUxMLFxuICAgICdwbGF5ZXJzJyBJTlRFR0VSIE5PVCBOVUxMLFxuICAgICdkdXJhdGlvbicgSU5URUdFUiBERUZBVUxUIC0xLFxuICAgICdwbGFjZW1lbnQnIElOVEVHRVIgTk9UIE5VTEwsXG4gICAgJ2tpbGxzJyBJTlRFR0VSIERFRkFVTFQgLTEsXG4gICAgJ2Fzc2lzdHMnIElOVEVHRVIgREVGQVVMVCAwLFxuICAgICdhY2N1cmFjeScgRE9VQkxFIFBSRUNJU0lPTiBERUZBVUxUICctMScsXG4gICAgJ2RhbWFnZURlYWx0JyBJTlRFR0VSIERFRkFVTFQgLTEsXG4gICAgJ2RhbWFnZVRha2VuJyBJTlRFR0VSIERFRkFVTFQgLTEsXG4gICAgJ2Rpc3RhbmNlVHJhdmVsbGVkJyBET1VCTEUgUFJFQ0lTSU9OIERFRkFVTFQgJy0xJ1xuICApYCxcbiAgYENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTICdQbGF5ZXJzJyAoXG4gICAgJ3BsYXllcklEJyBWQVJDSEFSKDI1NSkgTk9UIE5VTEwgVU5JUVVFIFBSSU1BUlkgS0VZLFxuICAgICd1c2VybmFtZScgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgICdpc0JvdCcgVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgICdwbGF0Zm9ybScgVkFSQ0hBUigyNTUpLFxuICAgICdza2luJyBWQVJDSEFSKDI1NSksXG4gICAgJ3NuaXBlcycgSU5URUdFUiBOT1QgTlVMTCBERUZBVUxUIDFcbiAgKWAsXG5dO1xuXG5hc3luYyBmdW5jdGlvbiBnZXRBbGwoc3FsOnN0cmluZyk6UHJvbWlzZTxhbnlbXT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIGRiLmRhdGFiYXNlLmFsbChzcWwsIGZ1bmN0aW9uIChlcnIsIHJvd3MpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZShyb3dzKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNlcmlhbGl6ZShzcWw6c3RyaW5nW10pOlByb21pc2U8Ym9vbGVhbj4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGRiLmRhdGFiYXNlLnNlcmlhbGl6ZSgoKSA9PiB7XG4gICAgICBmdW5jdGlvbiBkYlJ1bih4Om51bWJlcikge1xuICAgICAgICBpZiAoeCA8IHNxbC5sZW5ndGgpIHtcbiAgICAgICAgICBkYi5kYXRhYmFzZS5ydW4oc3FsW3hdLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgIHJldHVybiByZWplY3QoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7IGRiUnVuKCsreCk7IH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgfVxuICAgICAgZGJSdW4oMCk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5hc3luYyBmdW5jdGlvbiBleGVjKHNxbDpzdHJpbmcpOlByb21pc2U8Ym9vbGVhbj4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIGRiLmRhdGFiYXNlLmV4ZWMoc3FsLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIHJldHVybiByZWplY3QoZmFsc2UpO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldFNpbmdsZShzcWw6c3RyaW5nKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgZGIuZGF0YWJhc2UuZ2V0KHNxbCwgZnVuY3Rpb24gKGVyciwgcm93cykge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICB9XG4gICAgICByZXNvbHZlKHJvd3MpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gd2hlcmVJbkdlbmVyYXRvcihkYXRhOnN0cmluZ1tdKSB7XG4gIHJldHVybiBgKCR7J1xcJycgKyBkYXRhLmpvaW4oJ1xcJyxcXCcnKSArICdcXCcnfSlgO1xufVxuXG5jbGFzcyBEYXRhYmFzZSB7XG4gIGRhdGFiYXNlOiBzcWxpdGU7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5kYXRhYmFzZSA9IG5ldyBzcWxpdGUoJ2RhdGFiYXNlLmRiJywgKGVycikgPT4ge1xuICAgICAgaWYgKGVycikgY29uc29sZS5lcnJvcignRGF0YWJhc2Ugb3BlbmluZyBlcnJvcjogJywgZXJyKTtcbiAgICB9KTtcbiAgICBpbml0U3RhdGVtZW50cy5mb3JFYWNoKChzcWwpID0+IHtcbiAgICAgIHRoaXMuZGF0YWJhc2UucnVuKHNxbCk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRSZXBsYXkgPSBhc3luYyAoZ2FtZXJzOkdhbWVQbGF5ZXJbXSwga2lsbHM6R2FtZUVsaW1pbmF0aW9uW10sIHBsYXllcnM6UGxheWVyW10sIHN0YXQ6R2FtZVN0YXQpID0+IHtcbiAgICBmdW5jdGlvbiBlc2NhcGUobGluZTpzdHJpbmcpIHtcbiAgICAgIHJldHVybiBsaW5lLnJlcGxhY2VBbGwoXCInXCIsIFwiJydcIik7XG4gICAgfVxuICAgIGxldCBzcWw6c3RyaW5nO1xuICAgIHNxbCA9IGBJTlNFUlQgSU5UTyBHYW1lU3RhdHMgVkFMVUVTICgnJHtzdGF0LmdhbWVJRH0nLCAnJHtzdGF0Lm93bmVyfScsICcke3N0YXQudGltZXN0YW1wLnRvSVNPU3RyaW5nKCl9JywgJyR7ZXNjYXBlKHN0YXQucmVwbGF5TmFtZSl9JywgJyR7c3RhdC5tb2RlfScsICR7c3RhdC5ib3RzfSwgJHtzdGF0LnBsYXllcnN9LCAke3N0YXQuZHVyYXRpb259LCAke3N0YXQucGxhY2VtZW50fSwgJHtzdGF0LmtpbGxzfSwgJHtzdGF0LmFzc2lzdHN9LCAke3N0YXQuYWNjdXJhY3l9LCAke3N0YXQuZGFtYWdlRGVhbHR9LCAke3N0YXQuZGFtYWdlVGFrZW59LCAke3N0YXQuZGlzdGFuY2VUcmF2ZWxsZWR9KWA7XG4gICAgaWYgKCFhd2FpdCBleGVjKHNxbCkpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgc3FsID0gYElOU0VSVCBJTlRPIEdhbWVQbGF5ZXJzIFZBTFVFUyAke2dhbWVycy5tYXAoZyA9PiBgKE5VTEwsICcke2cucGxheWVySUR9JywgJyR7Zy5nYW1lSUR9JywgJHtnLmlzQm90ID8gMSA6IDB9LCAke2cudGVhbX0sICR7Zy5raWxsc30sICR7Zy5wbGFjZW1lbnR9KWApLmpvaW4oJywgJyl9YDtcbiAgICBpZiAoIWF3YWl0IGV4ZWMoc3FsKSkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBpZiAoa2lsbHMubGVuZ3RoID4gMCkge1xuICAgICAgc3FsID0gYElOU0VSVCBJTlRPIEdhbWVFbGltaW5hdGlvbnMgVkFMVUVTICR7a2lsbHMubWFwKGsgPT4gYChOVUxMLCAnJHtrLmdhbWVJRH0nLCAke2sudGltZX0sICcke2sua2lsbGVySUR9JywgJyR7ay5raWxsZWRJRH0nLCAke2sua25vY2tlZH0sICcke2sud2VhcG9ufScpYCkuam9pbignLCAnKX1gO1xuICAgICAgaWYgKCFhd2FpdCBleGVjKHNxbCkpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgfVxuICAgIGNvbnN0IHNlcmlhbGl6ZXFsOnN0cmluZ1tdID0gW107XG4gICAgY29uc3QgcGxheWVyU3FsOnN0cmluZ1tdID0gW107XG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCBwbGF5ZXJzLmxlbmd0aDsgeCsrKSB7XG4gICAgICBjb25zdCBwID0gcGxheWVyc1t4XTtcbiAgICAgIGNvbnN0IGV4aXN0aW5nUGxheWVyID0gYXdhaXQgdGhpcy5nZXRQbGF5ZXIocC5wbGF5ZXJJRCk7XG4gICAgICBjb25zdCBwbGF0Zm9ybSA9IHAucGxhdGZvcm0gPT0gbnVsbCA/ICdOVUxMJyA6IGAnJHtwLnBsYXRmb3JtfSdgO1xuICAgICAgbGV0IHNraW4gPSBwLnNraW4gPT0gbnVsbCA/ICdOVUxMJyA6IGAnJHtwLnNraW59J2A7XG4gICAgICBpZiAoZXhpc3RpbmdQbGF5ZXIgIT0gbnVsbCkge1xuICAgICAgICBpZiAoZXhpc3RpbmdQbGF5ZXIuc2tpbiAhPSBudWxsICYmIHNraW4gPT0gJ05VTEwnKSB7XG4gICAgICAgICAgc2tpbiA9IGV4aXN0aW5nUGxheWVyLnNraW47XG4gICAgICAgIH1cbiAgICAgICAgc2VyaWFsaXplcWwucHVzaChgVVBEQVRFIFBsYXllcnMgU0VUIHNuaXBlcyA9IHNuaXBlcyArIDEsIHBsYXRmb3JtID0gJHtwbGF0Zm9ybX0sIHVzZXJuYW1lID0gJyR7ZXNjYXBlKHAudXNlcm5hbWUpfScsIHNraW4gPSAke3NraW59IFdIRVJFIHBsYXllcklEID0gJyR7cC5wbGF5ZXJJRH0nYCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcGxheWVyU3FsLnB1c2goYCgnJHtwLnBsYXllcklEfScsICcke2VzY2FwZShwLnVzZXJuYW1lKX0nLCAke3AuaXNCb3R9LCAke3BsYXRmb3JtfSwgJHtza2lufSwgJHtwLnNuaXBlc30pYCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwbGF5ZXJTcWwubGVuZ3RoID4gMCkge1xuICAgICAgc3FsID0gKGBJTlNFUlQgSU5UTyBQbGF5ZXJzIFZBTFVFUyAke3BsYXllclNxbC5qb2luKCcsICcpfWApO1xuICAgICAgaWYgKCFhd2FpdCBleGVjKHNxbCkpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBzZXJpYWxpemUoc2VyaWFsaXplcWwpO1xuICB9O1xuXG4gIGdldE1hdGNoSGlzdG9yeSA9IGFzeW5jIChwYWdlID0gMSk6UHJvbWlzZTxHYW1lU3RhdFtdPiA9PiB7XG4gICAgY29uc3QgbGltaXQgPSAyNTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRBbGwoYFNFTEVDVCAqIEZST00gR2FtZVN0YXRzIE9SREVSIEJZIHRpbWVzdGFtcCBERVNDIExJTUlUICR7bGltaXR9IE9GRlNFVCAkeyhsaW1pdCAqIHBhZ2UpIC0gbGltaXR9YCk7XG4gICAgY29uc3QgbWF0Y2hlczpHYW1lU3RhdFtdID0gW107XG4gICAgcmVzdWx0LmZvckVhY2goZSA9PiB7XG4gICAgICBtYXRjaGVzLnB1c2gobmV3IEdhbWVTdGF0KGUpKTtcbiAgICB9KTtcbiAgICByZXR1cm4gbWF0Y2hlcztcbiAgfTtcblxuICBnZXRHYW1lckhpc3RvcnkgPSBhc3luYyAocGFnZSA9IDEsIHBsYXllcklEOnN0cmluZyk6UHJvbWlzZTxHYW1lU3RhdFtdPiA9PiB7XG4gICAgY29uc3QgbGltaXQgPSAyNTtcbiAgICBjb25zdCBtYXRjaGVzOkdhbWVTdGF0W10gPSBbXTtcbiAgICBjb25zdCBnYW1lckdhbWVzID0gYXdhaXQgZ2V0QWxsKGBTRUxFQ1QgZ2FtZUlEIEZST00gR2FtZVBsYXllcnMgV0hFUkUgcGxheWVySUQgPSAnJHtwbGF5ZXJJRH0nYCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0QWxsKGBTRUxFQ1QgKiBGUk9NIEdhbWVTdGF0cyBXSEVSRSBnYW1lSUQgSU4gJHt3aGVyZUluR2VuZXJhdG9yKGdhbWVyR2FtZXMubWFwKGcgPT4gZy5nYW1lSUQpKX0gT1JERVIgQlkgdGltZXN0YW1wIERFU0MgTElNSVQgJHtsaW1pdH0gT0ZGU0VUICR7KGxpbWl0ICogcGFnZSkgLSBsaW1pdH1gKTtcbiAgICByZXN1bHQuZm9yRWFjaChlID0+IHtcbiAgICAgIG1hdGNoZXMucHVzaChuZXcgR2FtZVN0YXQoZSkpO1xuICAgIH0pO1xuICAgIHJldHVybiBtYXRjaGVzO1xuICB9O1xuXG4gIGdldEVsaW1pbmF0aW9ucyA9IGFzeW5jIChnYW1lSUQ6IHN0cmluZyk6IFByb21pc2U8R2FtZUVsaW1pbmF0aW9uW10+ID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRBbGwoYFNFTEVDVCAqIEZST00gR2FtZUVsaW1pbmF0aW9ucyBXSEVSRSBnYW1lSUQ9JyR7Z2FtZUlEfScgT1JERVIgQlkgaWRgKTtcbiAgICBjb25zdCBlbGltaW5hdGlvbnM6R2FtZUVsaW1pbmF0aW9uW10gPSBbXTtcbiAgICByZXN1bHQuZm9yRWFjaChlID0+IHtcbiAgICAgIGVsaW1pbmF0aW9ucy5wdXNoKG5ldyBHYW1lRWxpbWluYXRpb24oZSkpO1xuICAgIH0pO1xuICAgIHJldHVybiBlbGltaW5hdGlvbnM7XG4gIH07XG5cbiAgZ2V0R2FtZXJzID0gYXN5bmMgKGdhbWVJRDogc3RyaW5nKTogUHJvbWlzZTxHYW1lUGxheWVyW10+ID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRBbGwoYFNFTEVDVCAqIEZST00gR2FtZVBsYXllcnMgV0hFUkUgZ2FtZUlEPScke2dhbWVJRH0nIE9SREVSIEJZIHRlYW1gKTtcbiAgICBjb25zdCBnYW1lcnM6R2FtZVBsYXllcltdID0gW107XG4gICAgcmVzdWx0LmZvckVhY2goZSA9PiB7XG4gICAgICBnYW1lcnMucHVzaChuZXcgR2FtZVBsYXllcihlKSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGdhbWVycztcbiAgfTtcblxuICBnZXRHYW1lclBsYXllcnMgPSAgYXN5bmMgKGdhbWVyczogR2FtZVBsYXllcltdKTogUHJvbWlzZTxQbGF5ZXJbXT4gPT4ge1xuICAgIGNvbnN0IGZpbHRlcmVkID0gZ2FtZXJzLm1hcChnID0+IGAke2cucGxheWVySUR9YCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0QWxsKGBTRUxFQ1QgKiBGUk9NIFBsYXllcnMgV0hFUkUgcGxheWVySUQgSU4gJHt3aGVyZUluR2VuZXJhdG9yKGZpbHRlcmVkKX1gKTtcbiAgICBjb25zdCBwbGF5ZXJzOlBsYXllcltdID0gW107XG4gICAgcmVzdWx0LmZvckVhY2goZSA9PiB7XG4gICAgICBwbGF5ZXJzLnB1c2gobmV3IFBsYXllcihlKSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHBsYXllcnM7XG4gIH07XG5cbiAgZ2V0R2FtZVN0YXRzID0gYXN5bmMgKGdhbWVJRDogc3RyaW5nKTogUHJvbWlzZTxHYW1lU3RhdD4gPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFNpbmdsZShgU0VMRUNUICogRlJPTSBHYW1lU3RhdHMgV0hFUkUgZ2FtZUlEPScke2dhbWVJRH0nYCk7XG4gICAgcmV0dXJuIG5ldyBHYW1lU3RhdChyZXN1bHQpO1xuICB9O1xuXG4gIGdldFBsYXllciA9IGFzeW5jIChwbGF5ZXJJRDogc3RyaW5nKTogUHJvbWlzZTxQbGF5ZXI+ID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRTaW5nbGUoYFNFTEVDVCAqIEZST00gUGxheWVycyBXSEVSRSBwbGF5ZXJJRD0nJHtwbGF5ZXJJRH0nYCkgYXMgUGxheWVyO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgZ2V0UGxheWVycyA9IGFzeW5jICgpOiBQcm9taXNlPFBsYXllcltdPiA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0QWxsKGBTRUxFQ1QgKiBGUk9NIFBsYXllcnNgKTtcbiAgICByZXR1cm4gKHJlc3VsdCkgYXMgUGxheWVyW107XG4gIH1cblxuICBnZXRQbGF5ZXJHYW1lcyA9IGFzeW5jIChwbGF5ZXJJRDogc3RyaW5nKTogUHJvbWlzZTxHYW1lU3RhdFtdPiA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0QWxsKGBTRUxFQ1QgKiBGUk9NIEdhbWVQbGF5ZXJzIFdIRVJFIHBsYXllcklEPScke3BsYXllcklEfSdgKTtcbiAgICBjb25zdCBzdGF0czpHYW1lU3RhdFtdID0gW107XG4gICAgcmVzdWx0LmZvckVhY2goZSA9PiB7XG4gICAgICBzdGF0cy5wdXNoKG5ldyBHYW1lU3RhdChlKSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHN0YXRzO1xuICB9O1xuXG4gIGdldExhc3RHYW1lSUQgPSBhc3luYygpOiBQcm9taXNlPHN0cmluZz4gPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFNpbmdsZSgnU0VMRUNUICogRlJPTSBHYW1lU3RhdHMgT1JERVIgQlkgdGltZXN0YW1wIERFU0MgTElNSVQgMScpO1xuICAgIHJldHVybiByZXN1bHQgIT0gbnVsbCA/IHJlc3VsdC5nYW1lSUQgOiBudWxsO1xuICB9O1xuXG4gIGdldFNuaXBlcnMgPSBhc3luYygpOiBQcm9taXNlPFBsYXllcltdPiA9PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0QWxsKCdTRUxFQ1QgKiBGUk9NIFBsYXllcnMgT1JERVIgQlkgc25pcGVzIERFU0MnKTtcbiAgICBjb25zdCBwbGF5ZXJzOlBsYXllcltdID0gW107XG4gICAgcmVzdWx0LmZvckVhY2goZSA9PiB7XG4gICAgICBwbGF5ZXJzLnB1c2gobmV3IFBsYXllcihlKSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHBsYXllcnM7XG4gIH07XG5cbiAgZ2V0TGFzdEdhbWUgPSBhc3luYygpOiBQcm9taXNlPEdhbWVTdGF0IHwgbnVsbD4gPT4ge1xuICAgIHJldHVybiBhd2FpdCBnZXRTaW5nbGUoJ1NFTEVDVCAqIEZST00gR2FtZVN0YXRzIE9SREVSIEJZIFRpbWVzdGFtcCBERVNDIExJTUlUIDEnKSBhcyBHYW1lU3RhdDtcbiAgfTtcblxuICBkZWxldGVNYXRjaCA9IGFzeW5jKGdhbWVJRDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gICAgYXdhaXQgZXhlYyhgREVMRVRFIEZST00gR2FtZVN0YXRzIFdIRVJFIGdhbWVJRD0nJHtnYW1lSUR9J2ApO1xuICAgIGF3YWl0IGV4ZWMoYFVQREFURSBQbGF5ZXJzIFNFVCBzbmlwZXMgPSBzbmlwZXMgLSAxIFdIRVJFIHBsYXllcklEIElOIChTRUxFQ1QgcGxheWVySUQgRlJPTSBHYW1lUGxheWVycyBXSEVSRSBnYW1lSUQgPSAnJHtnYW1lSUR9JylgKTtcbiAgICBhd2FpdCBleGVjKGBERUxFVEUgRlJPTSBHYW1lUGxheWVycyBXSEVSRSBnYW1lSUQ9JyR7Z2FtZUlEfSdgKTtcbiAgICByZXR1cm4gYXdhaXQgZXhlYyhgREVMRVRFIEZST00gR2FtZUVsaW1pbmF0aW9ucyBXSEVSRSBnYW1lSUQ9JyR7Z2FtZUlEfSdgKTtcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IGRiID0gbmV3IERhdGFiYXNlKCk7Il0sIm5hbWVzIjpbInZlcnNpb25zIiwibm9kZUZldGNoIiwiY2xvc2VQcm9ncmFtIiwiZWxlY3Ryb24iLCJtaW5pbWl6ZVByb2dyYW0iLCJvcGVuVXJsIiwidXJsIiwiY2hlY2tVcGRhdGUiLCJyZXMiLCJhZGRSZXBsYXkiLCJHYW1lRWxpbWluYXRpb24iLCJkYXRhIiwiR2FtZVBsYXllciIsIkdhbWVTdGF0IiwiUGxheWVyIiwiaW5pdFN0YXRlbWVudHMiLCJnZXRBbGwiLCJzcWwiLCJyZXNvbHZlIiwicmVqZWN0IiwiZGIiLCJlcnIiLCJyb3dzIiwic2VyaWFsaXplIiwiZGJSdW4iLCJ4IiwiZXhlYyIsImdldFNpbmdsZSIsIndoZXJlSW5HZW5lcmF0b3IiLCJEYXRhYmFzZSIsInNxbGl0ZTMiLCJnYW1lcnMiLCJraWxscyIsInBsYXllcnMiLCJzdGF0IiwiZXNjYXBlIiwibGluZSIsImciLCJrIiwic2VyaWFsaXplcWwiLCJwbGF5ZXJTcWwiLCJwIiwiZXhpc3RpbmdQbGF5ZXIiLCJwbGF0Zm9ybSIsInNraW4iLCJwYWdlIiwicmVzdWx0IiwibWF0Y2hlcyIsImUiLCJwbGF5ZXJJRCIsImdhbWVyR2FtZXMiLCJnYW1lSUQiLCJlbGltaW5hdGlvbnMiLCJmaWx0ZXJlZCIsInN0YXRzIl0sIm1hcHBpbmdzIjoiNkpBQU9BLEVBQUEsUUFBQSxTQ0NQQyxFQUFBLFFBQUEsWUFBQSxFQUVBLFNBQUFDLEdBQUEsQ0FDRUMsRUFBQSxZQUFBLEtBQUEsY0FBQSxDQUNGLENBRUEsU0FBQUMsR0FBQSxDQUNFRCxFQUFBLFlBQUEsS0FBQSxpQkFBQSxDQUNGLENBRUEsU0FBQUUsRUFBQUMsRUFBQSxDQUNFSCxFQUFBLE1BQUEsYUFBQUcsQ0FBQSxDQUNGLENBRUEsZUFBQUMsR0FBQSxDQUdFLE1BQUFDLEVBQUEsTUFBQVAsRUFGQSw4RUFFQSxFQUVBLE9BREEsV0FBQSxNQUFBTyxFQUFBLEtBQUEsQ0FB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
